<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="1.0">


<!-- (c) 2002-2013 che Wolfram Diestel

  transformi la stiloliston al HTML

-->

<xsl:param name="agordo-pado"/>

<xsl:variable name="enhavo"><xsl:value-of select="concat($agordo-pado,'/enhavo.xml')"/></xsl:variable>
 <xsl:variable name="inx_paghoj"
		select="count(document($enhavo)//pagho[not(@kashita='jes')])"/>


<xsl:output method="html" version="4.0" encoding="utf-8"/>

<xsl:template match="stiloj">
  <html>
    <head>
      <title>mallongigoj de stiloj</title>
      <link title="indekso-stilo" type="text/css" 
            rel="stylesheet" href="../stl/indeksoj.css"/>
    </head>
    <body>
      <table cellspacing="0">
	<xsl:call-template name="menuo"/>
	<tr>
          <td colspan="{$inx_paghoj}" class="enhavo">

	    <h1>mallongigoj de stiloj</h1>

	    <table align="center">
	      <tr><th>kodo</th><th>stilo</th></tr>
	      <xsl:for-each select="stilo">
		<tr>
		  <td><code><xsl:value-of select="@kodo"/></code></td>
		  <td>
		    <xsl:value-of select="."/>
		  </td>
		</tr>
	      </xsl:for-each>
	    </table>
	  </td>
	</tr>
      </table>
  </body>
  </html>
</xsl:template>

<xsl:template name="menuo">
  <xsl:variable name="aktiva" select="_ktp"/>
  <tr>
    <xsl:for-each select="document($enhavo)//pagho[not(@kashita='jes')]">
      <xsl:choose>
        <xsl:when test="@dosiero=$aktiva">
          <td class="aktiva">
            <a href="../inx/{@dosiero}">
              <xsl:value-of select="@titolo"/>
            </a>
          </td>
        </xsl:when>
        <xsl:otherwise>
          <td class="fona">
            <a href="../inx/{@dosiero}">
              <xsl:value-of select="@titolo"/>
            </a>
          </td>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:for-each>     
  </tr>
</xsl:template>


</xsl:stylesheet>
    





